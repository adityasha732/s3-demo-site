<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>S3 Demo Upload</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      background: #f7f7f7;
    }
    h2 {
      color: #333;
    }
    input[type="file"] {
      margin-bottom: 15px;
    }
    input[type="text"] {
      width: 500px;
      padding: 10px;
      margin-bottom: 10px;
      border: 2px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
    }
    button {
      padding: 10px 20px;
      background: #0078ff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 5px;
    }
    button:hover {
      background: #005fcc;
    }
    .section {
      margin-bottom: 40px;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
  </style>
</head>
<body>

  <div class="section">
    <h2>S3 Upload using Presigned URL</h2>

    <input type="file" id="fileInput" /><br/>

    <input id="putUrl" placeholder="Paste presigned PUT URL" /><br/>

    <button id="uploadBtn">Upload File</button>
  </div>

  <div class="section">
    <h3>Download</h3>

    <input id="getUrl" placeholder="Paste presigned GET URL" /><br/>

    <button id="downloadBtn">Download File</button>
  </div>

  <script>
    document.getElementById("uploadBtn").onclick = async () => {
      const file = document.getElementById("fileInput").files[0];
      const url = document.getElementById("putUrl").value.trim();

      if (!file) return alert("Please choose a file.");
      if (!url) return alert("Please paste a presigned PUT URL.");

      try {
        const res = await fetch(url, {
          method: "PUT",
          body: file
        });

        if (res.ok) alert("Upload successful!");
        else alert("Upload failed: " + res.status);
      } catch (e) {
        alert("Error: " + e);
      }
    };

    document.getElementById("downloadBtn").onclick = () => {
      const url = document.getElementById("getUrl").value.trim();
      if (!url) return alert("Paste a presigned GET URL.");
      window.open(url, "_blank");
    };
  </script>

</body>
</html>
